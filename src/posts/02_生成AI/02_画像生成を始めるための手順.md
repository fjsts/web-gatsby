---
title: '画像生成を始めるための手順'
created: '2023/09/03'
update: '2023/09/03'
tags: 
    - AI
    - Python
    - StableDiffusion

# ［Ctrl］＋［K］→［V］
---

## 1. プロンプトの詳細な記述

プロンプトは画像の内容を最大限詳細に記述します。

```
白黒の子猫がソファの上で丸くなって眠っている。光が差し込んでいる。リアルでクオリティの高い画像。
```

- 子猫の毛色、起きている状態、光の加減など細かい要素を指定する。
- 画質に関する指示も含める。

## 2. テンプレートプロンプト

```
{人物}が{行為}をしているリアルな画像
```

- 中括弧{}で変数を設定し、繰り返し使えるテンプレートを作成。

## 3. ネガティブプロンプト

```
{内容}, low qualityではない, cartoonではない
``` 

- 画像に含めたくない要素を否定形式で指定する。

## 4. 設定ファイル

config.yaml:

```yaml
image_size: 512
batchSize: 1 
...
```

- 画像サイズ、バッチサイズなどのパラメータを設定。

## 5. GPUの指定

launch.py:

```python
--gpu 0
```

config.yaml:

```yaml 
device: cuda:0
```

- 第一GPUを使うよう指定。

## 6. 画像の保存

```python
from diffusers import ImagePipeline

image = model.decode(prompt) 

ImagePipeline.save_image(image, "cat.png")
```

- ImagePipelineを使って画像を保存。

## 7. ハイパラメータ調整

```
guidance_scale: 7.5 
num_inference_steps: 50
``` 

- 学習率、イテレーション回数などを調整。

このように実際のコード例も合わせることで、Stable Diffusionの利用がよりイメージしやすくなると思います。